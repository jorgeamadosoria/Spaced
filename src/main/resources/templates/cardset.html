<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments::head('Spaced - Cardset')">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>
<script src="../static/js/testdata.js" th:src="@{/js/testdata.js}"></script>
<script src="../static/js/custom.js" th:src="@{/js/custom.js}"></script>
<link rel="stylesheet" type="text/css" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
<link rel="stylesheet" type="text/css" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
<link rel="stylesheet" type="text/css" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">
<link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="../static/css/hover-min.css" th:href="@{/css/hover-min.css}" />
<link rel="stylesheet" type="text/css" href="../static/css/flip.css" th:href="@{/css/flip.css}" />
<link rel="stylesheet" type="text/css" href="../static/css/custom.css" th:href="@{/css/custom.css}" />
</head>
<body>
	<header th:replace="fragments :: header" class="navbar">
		<section class="navbar-section">
			&nbsp;&nbsp;<a href="index.html" class="navbar-brand mr-2">Spaced</a>
		</section>
	</header>
	<div class="docs-content">
		<div class="divider text-center" data-content="Cardset"></div>
		<div class="tile tile-centered">
			<div class="tile-icon">
				<div class="example-tile-icon">
					<figure class="avatar avatar-lg">
						<img th:src="${cardset.image}" />
					</figure>
				</div>
			</div>
			<div class="tile-content">
				<p class="tile-title" th:text="${cardset.name}"></p>
				<p class="tile-body" th:text="${cardset.description}"></p>
			</div>
		</div>
		<div class="divider text-center" data-content="Cards"></div>
		<div class="container ">
			<div class="columns">
				<div class="column col-2">
					<div class="card cheight">
						<div class="card-body tile tile-centered horz-center" id="answer">
							<a id="card-add" href="#modal-create-card"><i class="fas fa-6x fa-plus-circle"></i></a>
						</div>
					</div>
					<br>
				</div>
				<div th:each="card: ${cardset.cards}" class="column col-2">
					<div th:id="${card.id}" class="card cheight">
						<div class="card-header">
							<div class="card-title" id="task" th:text="${card.task}"></div>
						</div>
						<div class="card-body" id="answer" th:text="${card.answer}"></div>
						<div class="card-footer">
							<a href="#modal-create-card" title="edit set" class="link-edit btn btn-sm btn-primary hvr-grow"><i class="fas fa-edit"></i></a>&nbsp;&nbsp; <a href="#" title="delete set" class="link-delete btn btn-sm btn-error hvr-grow"><i class="fas fa-trash-alt"></i></a>&nbsp;&nbsp;
						</div>
					</div>
					<br>
				</div>
			</div>
		</div>
	</div>
	</div>
	<div class="modal modal-lg" id="modal-create-card">
		<a href="#close" class="modal-overlay" aria-label="Close"></a>
		<div class="modal-container">
			<div class="modal-header">
				<a href="#close" class="btn btn-clear float-right" aria-label="Close"></a>
				<div class="modal-title h5">New Card</div>
				<form method="post" action="/entities/card">
					<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
					<input type="hidden" id="cardset-id" name="cardset-id" th:value="${cardset.id}">
					<input type="hidden" id="id" name="id">
					<div class="form-group">
						<label class="form-label" for="input-example-1">Task</label>
						<input class="form-input" type="text" id="task" name="task" placeholder="Task">
					</div>
					<div class="form-group">
						<label class="form-label" for="input-example-1">Answer</label>
						<textarea class="form-input" type="text" id="answer" name="answer" rows="8" placeholder="Answer"></textarea>
					</div>
					<div class="form-group">
						<button type="reset" class="btn btn-primary">Reset</button>
						<button type="submit" class="btn btn-primary">Submit</button>
					</div>
				</form>
			</div>
		</div>
		<div class="modal-body">
			<div class="content">
				<!-- content here -->
			</div>
		</div>
		<div class="modal-footer">...</div>
	</div>
</body>
<script>
	/*<![CDATA[*/
		
		var _csrfParameterName = '[[${_csrf.parameterName}]]';// 'default';
	var _csrfToken = '[[${_csrf.token}]]';// 'default';
	var csrf = {};
	csrf[_csrfParameterName] = _csrfToken;
	
	$("#card-add").click(e => $(e.target).addClass("active"));
	$("a.link-edit").click(e => {
		var card = $(e.target).parent().parents(".card");
		var id = card.attr("id");
		$("#modal-create-card #id").val(id);
		$("#modal-create-card #task").val(card.find("#task").text());
		$("#modal-create-card #answer").val(card.find("#answer").text());
		
		$($(e.target).attr("href")).addClass("active");
		e.stopPropagation();
	});
	$("a.link-delete").click(e => { 
	$.get('/entities/card/delete/' + $(e.target).parent().parents(".card").attr("id"),
			() => $(e.target).parent().parents(".column").remove() ); e.stopPropagation();});
	/*]]>*/
</script>
</html>
</body>
</html>