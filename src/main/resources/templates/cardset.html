<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head
<head th:replace="fragments::head('Spaced - Home')">
<title th:text="${title}"></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>
<script src="../static/js/testdata.js" th:src="@{/js/testdata.js}"></script>
<script src="../static/js/custom.js" th:src="@{/js/custom.js}"></script>
<link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
<link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
<link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
<link rel="stylesheet" href="../static/css/hover-min.css" th:href="@{/css/hover-min.css}" />
<link rel="stylesheet" href="../static/css/custom.css" th:href="@{/css/custom.css}" />


</head>
<body>
<header class="navbar">
  <section class="navbar-section">
    <a href="..." class="navbar-brand mr-2">Spaced</a>
  </section>
  <section class="navbar-section">
    <a href="..." class="btn btn-link">Admin</a>
    <a href="..." class="btn btn-link">User</a>
  </section>
</header>
	
  <div class="docs-content">
	<ul id="deck-tabs" class="tab tab-block">
	</ul>
  <div class="container">
 </div>
	</div>
	<section class="d-hide">
		<!-- deck panel model -->
		<div id="deck-model" class="d-hide panel-item columns">

		</div>
		<!-- deck panel model -->
		<!-- deck tab model -->
		<li id="deck-tab-model" class="tab-item" data-panel="">
			<a href="#" id="name" class="badge" data-badge=""></a>
		</li>
		<!-- deck tab model -->
		<!-- card model -->
		<div id="card-model" class="column col-1 col-xs-2">
			<div class="panel">
				<div class="panel-header">
					<div class="panel-title" id="task">
					</div>
				</div>
				<div class="panel-body" id="answer">
				</div>
				<div class="panel-footer">
					<i><sub id="last"></sub></i>
				</div>
			</div>
		</div>
		<!-- card model -->
	</section>
</body>
<script>
	/*<![CDATA[*/
	//data load and massaging
	var cardset = loadCardset(1);

	//select unique deck ids
	var decks = $.map(cards, card => card.deck).filter((value, index, self) => self.indexOf(value) === index);

	var cardsCount = _.countBy(cardset.cards.map(card => card.deck.id));

	decks.forEach(deck => {
		//create deck panels
		$("#deck-model").clone().attr("id",'deck-' + deck.id)
		.appendTo($(".container"));
	
		//create deck tabs
		$("#deck-tab-model").clone().attr("id","tab-deck-" + deck.id)
		.attr("data-panel","deck-" + deck.id)
		.find("#name").text(deck.name)
		.attr("data-badge",cardsCount[deck.id]).end()
		.appendTo($("#deck-tabs"));
		
		//activate first tab
		$("#deck-tabs .tab-item").first().addClass("active");
		//activate first panel
		$(".container .panel-item").first().removeClass("d-hide");
	});
	
	//create cards
	cardset.cards.forEach(card => {
		$("#card-model").clone().attr("id",'card-' + card.id)
		.find("#task").text(card.task).end()
		.find("#answer").text(card.answer).end()
		.find("#last").text(new Date(card.last).toLocaleDateString()).end()
		.appendTo($("#deck-" + card.deck.id));
	});
	
	
	
	
	//================================================
	
	//page functionality
	$("li.tab-item").click(function(e){
		$("li.tab-item").removeClass("active");
		$(this).addClass("active");
		$(".columns").addClass("d-hide");
		$("#" + $(this).data("panel")).removeClass("d-hide");
	});
	
	/*]]>*/
</script>
</html>
</body>
</html>